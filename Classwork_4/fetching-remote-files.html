<!DOCTYPE html>
<!-- saved from url=(0045)https://blm305.github.io/2022/work/fetch.html -->
<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=device-width" />
    <link
      rel="icon"
      href="https://blm-fsmvu.github.io/305/images/icon192.png"
    />
    <title>Evren Keskin - CW#4</title>

    <style>
      /* CSS comment */
      body {
        max-width: 440px;
      }
      #url {
        width: 190px;
      }
      span,
      #url {
        color: blue;
      }
    </style>
    <style>
      @font-face {
        font-family: "Open Sans Regular";
        font-style: normal;
        font-weight: 400;
        src: url("chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-regular.woff");
      }
    </style>
    <style>
      @font-face {
        font-family: "Open Sans Bold";
        font-style: normal;
        font-weight: 800;
        src: url("chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-800.woff");
      }
    </style>
  </head>

  <body>
    <!-- HTML comment: Modify all items marked xxx -->

    <h2 id="title" title="Put your name here">xxx</h2>
    <p title="navigator.platform">Platform: <span id="plat">xxx</span></p>
    <p title="Battery level (integer)">
      Battery level: <span id="lev">xxx</span>
    </p>
    <p title="Latitude/Longitude (4 digits)">
      Location: <span id="loc"></span>
    </p>
    <p title="Does the URL exist?">
      URL
      <input
        type="url"
        id="url"
        value="https://keskinevren.github.io/advanced-programming/index.html"
        onchange="check()"
      />
      <span id="resp">OK</span>
    </p>
    <hr />
    <b>Sample code</b>
    <pre
      id="sample"
    >function init() {<br>//complete the code below<br>    plat.innerText = 'xxx';<br>    navigator.geolocation<br>      .getCurrentPosition(p =&gt;<br>        loc.innerText = 'xxx'<br>      );<br>    navigator.getBattery().then(b =&gt;<br>        lev.innerText = 'xxx'<br>      );<br>    check()<br>}<br>function check() {<br>//complete the code below<br>    fetch(url.value).then(r =&gt; <br>      resp.innerText = r.ok? 'OK' : 'xxx'<br>    ).catch(e =&gt; <br>      resp.innerText = e<br>    )<br>}</pre>

    <hr />

    <script>
      "use strict";
      function init() {
        //complete the code below
        plat.innerText = navigator.platform;
        navigator.geolocation.getCurrentPosition(
          (p) => (loc.innerText = p.coords.latitude.toFixed(4))
        );
        navigator
          .getBattery()
          .then((b) => (lev.innerText = (b.level * 100).toFixed(0) + "%"));
        check();
      }
      function check() {
        //complete the code below
        fetch(url.value)
          .then((r) => (resp.innerText = r.ok ? "OK" : "No Problem"))
          .catch((e) => (resp.innerText = e));
      }
      title.innerText = document.title;
      sample.innerText = init + "\n" + check;
      init();
    </script>
  </body>
</html>
